---
machine:
  python:
    version: 2.7.10
dependencies:
  pre:
    - |
      virtualenv .venv
      source .venv/bin/activate
      pip install -r requirements.txt
test:
  override:
    - |
      source .venv/bin/activate
      flake8 lambda_function.py
      python ./build_attendee.py
deployment:
  head:
    branch: master
    commands:
      - |
        source .venv/bin/activate
        ci/create_secret.sh
        lamvery deploy
  stable:
    branch: stable
    commands:
      - |
        source .venv/bin/activate
        ci/create_secret.sh
        lamvery deploy -a stable -p
